format long g
format compact
clc
close all
clearvars

%% get the file
file_filter = {'*.mat';'*.*'};
save_path = 'D:\Common\matlab\lidar';
[lidar_file, save_path] = uiputfile(file_filter, 'Enter lidar save file', save_path);

if(save_path == 0)
    return;
end


%% 
beam_altitude_angles = [...
    16.44860000, 15.86160000, 15.29380000, 14.75480000, 14.28190000, 13.70870000, 13.15370000, 12.59980000, ...
    12.15560000, 11.57710000, 11.03090000, 10.48820000, 10.06170000,  9.49518000,  8.94306000,  8.41130000, ...
     7.95626000,  7.41189000,  6.86564000,  6.31993000,  5.87780000,  5.32165000,  4.79088000,  4.24136000, ...
     3.80334000,  3.25466000,  2.71504000,  2.17245000,  1.71299000,  1.17244000,  0.63153400,  0.09325730, ...
    -0.36198100, -0.90280000, -1.52134000, -1.99457000, -2.43217000, -2.97807000, -3.52476000, -4.07447000, ...
    -4.52890000, -5.06902000, -5.60688000, -6.16850000, -6.61741000, -7.15968000, -7.70244000, -8.26022000, ...
    -8.70824000, -9.25208000, -9.79432000,-10.35190000,-10.81520000,-11.35280000,-11.90410000,-12.47790000, ...
   -12.94010000,-13.48020000,-14.04180000,-14.62450000,-15.11550000,-15.65890000,-16.22400000,-16.82940000];

beam_azimuth_angles = [...
    3.06506000, 0.90587900, -1.24426000, -3.35551000, 3.04115000, 0.91443500, -1.20081000, -3.29919000,...
    3.04136000, 0.91682000, -1.18011000, -3.25555000, 3.03578000, 0.94344600, -1.14525000, -3.22680000,...
    3.04724000, 0.96425800, -1.10994000, -3.18478000, 3.07646000, 0.98644200, -1.08256000, -3.15037000,...
    3.08081000, 1.00996000, -1.06679000, -3.12131000, 3.09475000, 1.02968000, -1.02889000, -3.10155000,...
    3.11778000, 1.04717000, -1.07923000, -3.08057000, 3.14335000, 1.07253000, -0.99474300, -3.06283000,...
    3.18780000, 1.10767000, -0.96872200, -3.04399000, 3.21864000, 1.14071000, -0.94662500, -3.02730000,...
    3.24957000, 1.16120000, -0.91827900, -3.01797000, 3.29649000, 1.20036000, -0.90168500, -3.01612000,...
    3.35766000, 1.24051000, -0.87825700, -3.01890000, 3.42220000, 1.28708000, -0.85363600, -3.01873000];

h_angle = [-180+(360/4096):360/2048:180-(360/4096)];

%% create the structure and then save it

lidar_struct = struct('beam_altitude_angles',beam_altitude_angles,'beam_azimuth_angles',beam_azimuth_angles,'h_angle',h_angle);

save(fullfile(save_path,lidar_file),'lidar_struct');
